<div align="center">
  <img src="./public/images/main_logo.png" alt="Hit Secret Logo" width="300" />
</div>

# hit-secret

![Nuxt.js](https://img.shields.io/badge/Nuxt-020420?style=for-the-badge&logo=nuxt.js&logoColor=00DC82)
![Supabase](https://img.shields.io/badge/Supabase-3ECF8E?style=for-the-badge&logo=supabase&logoColor=white)
![TypeScript](https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white)
![Tailwind CSS](https://img.shields.io/badge/tailwindcss-%2338B2AC.svg?style=for-the-badge&logo=tailwind-css&logoColor=white)
![Tiptap](https://img.shields.io/badge/Tiptap-18181B?style=for-the-badge&logo=tiptap&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![Nginx](https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white)

Nuxt.jsì™€ Supabaseë¡œ êµ¬ì¶•ëœ ìµëª… ê²Œì‹œíŒ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. ì™„ì „í•œ ì‚¬ìš©ì ìµëª…ì„± ë³´ì¥ì„ ì¶”êµ¬í•©ë‹ˆë‹¤.

## ì£¼ìš” íŠ¹ì§•

### ğŸ”’ ì™„ì „í•œ ìµëª…ì„± ë³´ì¥
- **ì‚¬ìš©ì í…Œì´ë¸” ì—†ìŒ**: íšŒì›ê°€ì… ì‹œìŠ¤í…œ ìì²´ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ ê·¼ë³¸ì ìœ¼ë¡œ ì¶”ì  ë¶ˆê°€ëŠ¥
- **IP ì¶”ì  ì°¨ë‹¨**: IP ì£¼ì†Œë¥¼ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ ë¡œê·¸ì— ì¼ì ˆ ì €ì¥í•˜ì§€ ì•ŠìŒ
- **ì„¸ì…˜ ì¶”ì  ì—†ìŒ**: ì§€ì†ì ì¸ ì„¸ì…˜ì´ë‚˜ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- **ë‹‰ë„¤ì„ ê¸°ë°˜ ì†Œìœ ê¶Œ**: ê²Œì‹œê¸€/ëŒ“ê¸€ë§ˆë‹¤ ì„ì‹œ ë‹‰ë„¤ì„ + ë¹„ë°€ë²ˆí˜¸ë¡œ ê°„ë‹¨í•œ ì†Œìœ ê¶Œ ê´€ë¦¬
- **ìµëª… ë¡œê¹…**: ì„œë²„ ë¡œê·¸ì—ì„œ ê°œì¸ ì‹ë³„ ì •ë³´ë¥¼ ì™„ì „íˆ ì œê±°

<details>
<summary>ìµëª… ì ‘ê·¼ ë¡œê·¸ í˜•ì‹ ì˜ˆì‹œ</summary>

ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìµëª…ì„± ë³´ì¥ì„ ìœ„í•´ **ìµœì†Œ í•„ë“œ**ë§Œ ì ‘ê·¼ ë¡œê·¸ì— ë‚¨ê¹ë‹ˆë‹¤:

```json
{"level":30,"time":"2025-08-13T01:42:51.775Z","type":"access","method":"GET","url":"/","userAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36","responseTime":1907,"statusCode":500,"msg":"GET /"}
```

**í¬í•¨ë˜ëŠ” í•„ë“œ:**
- `time`: ISO ì‹œê°„
- `method`, `url`: HTTP ë©”ì„œë“œì™€ ê²½ë¡œ  
- `userAgent`: ë¸Œë¼ìš°ì € ì •ë³´ (ê°œì¸ ì‹ë³„ ë¶ˆê°€)
- `responseTime`: ì²˜ë¦¬ ì‹œê°„
- `statusCode`: ì‘ë‹µ ìƒíƒœ

**ì˜ë„ì ìœ¼ë¡œ ì œê±°ë˜ëŠ” í•­ëª©:**
- IP/remoteAddress/X-Forwarded-For
- ì¿ í‚¤/ì„¸ì…˜ ID/Authorization í—¤ë”
- ì‚¬ìš©ì ì‹ë³„ í† í°
- Geo/Location/Referrer ë“± íŠ¸ë˜í‚¹ì„± ë°ì´í„°

ì´ ì„¤ê³„ë¡œ ìš´ì˜ìëŠ” íŠ¸ë˜í”½ íŒ¨í„´ë§Œ ê´€ì°°í•  ìˆ˜ ìˆê³  **ê°œë³„ ì‚¬ìš©ìë¥¼ ì—­ì¶”ì í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.**
</details>

### ğŸ¤– AI ì§€ì› ê¸°ëŠ¥
- **AI ìš”ì•½**: ê¸´ ê²Œì‹œê¸€ì„ ìë™ìœ¼ë¡œ ìš”ì•½í•˜ì—¬ ë¹ ë¥¸ ë‚´ìš© íŒŒì•… ì§€ì›
- **AI ë§íˆ¬ ë³€í™˜**: ë‹¤ì–‘í•œ ë§íˆ¬ë¡œ ìë™ ë³€í™˜í•˜ì—¬ ê°œì„± ìˆëŠ” ê¸€ì“°ê¸° ì§€ì›

### ğŸŒ ì™„ì „í•œ ì˜¤í”ˆì†ŒìŠ¤
- **MIT ë¼ì´ì„¼ìŠ¤**: ììœ ë¡œìš´ ì‚¬ìš©, ìˆ˜ì •, ë°°í¬ ê°€ëŠ¥
- **ê°„í¸í•œ ë°°í¬**: Supabase í”„ë¡œì íŠ¸ë§Œ ìˆìœ¼ë©´ Vercelì´ë‚˜ Dockerë¡œ ì‰½ê²Œ ë°°í¬

## ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë¡ íŠ¸ì—”ë“œ**: Nuxt.js 4, Vue 3, TypeScript
- **ë°±ì—”ë“œ**: Nuxt Server API, Nitro
- **ë°ì´í„°ë² ì´ìŠ¤**: Supabase (PostgreSQL)
- **ìŠ¤íƒ€ì¼ë§**: Tailwind CSS
- **ì•„ì´ì½˜**: Nuxt Iconì„ í†µí•œ Lucide Icons
- **ë¦¬ì¹˜ í…ìŠ¤íŠ¸**: Tiptap (ProseMirror ê¸°ë°˜ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì—ë””í„°)
- **í…ŒìŠ¤íŒ…**: Vitest + Playwright

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
hit-secret/
â”œâ”€â”€ components/          # Vue ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ editor/         # Tiptap ì—ë””í„° & ë·°ì–´
â”‚   â”œâ”€â”€ post/           # ê²Œì‹œê¸€ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ sidebar/        # ì‚¬ì´ë“œë°” ìœ„ì ¯
â”‚   â””â”€â”€ ui/            # ê³µìš© UI ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ pages/              # í˜ì´ì§€ (íŒŒì¼ ê¸°ë°˜ ë¼ìš°íŒ…)
â”œâ”€â”€ server/api/         # API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ posts/         # ê²Œì‹œê¸€ API
â”‚   â”œâ”€â”€ comments/      # ëŒ“ê¸€ API
â”‚   â””â”€â”€ upload/        # íŒŒì¼ ì—…ë¡œë“œ API
â”œâ”€â”€ composables/        # Vue ì»´í¬ì €ë¸”
â”œâ”€â”€ utils/             # ìœ í‹¸ë¦¬í‹° (logger ë“±)
â”œâ”€â”€ types/             # TypeScript íƒ€ì… ì •ì˜
â”œâ”€â”€ tests/             # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â””â”€â”€ supabase/          # DB ìŠ¤í‚¤ë§ˆ
```

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### í…Œì´ë¸” ê°œìš”

ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìµëª…ì„±ì„ ìœ„í•´ ì„¤ê³„ëœ 3ê°œì˜ ì£¼ìš” í…Œì´ë¸”ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

#### posts (ê²Œì‹œê¸€)

ì™„ì „í•œ ìµëª…ì„±ì„ ë³´ì¥í•˜ëŠ” ê²Œì‹œê¸€ ì €ì¥ í…Œì´ë¸”

| ì»¬ëŸ¼ëª…           | íƒ€ì…        | ì„¤ëª…                                     |
| ---------------- | ----------- | ---------------------------------------- |
| id               | uuid        | ê¸°ë³¸í‚¤ (ìë™ ìƒì„±)                       |
| title            | text        | ê²Œì‹œê¸€ ì œëª© (1-200ì)                    |
| content          | text        | ê²Œì‹œê¸€ì˜ HTML ë‚´ìš©                       |
| preview          | text        | ìë™ ìƒì„±ëœ í…ìŠ¤íŠ¸ ë¯¸ë¦¬ë³´ê¸° (ìµœëŒ€ 300ì) |
| password_hash    | text        | ê²Œì‹œê¸€ ì†Œìœ ê¶Œì„ ìœ„í•œ í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸     |
| nickname         | varchar     | ì‚¬ìš©ì ì œê³µ ë‹‰ë„¤ì„ (ìµœëŒ€ 10ì)           |
| plain_text       | text        | ê²€ìƒ‰ìš© í”Œë ˆì¸ í…ìŠ¤íŠ¸ ë²„ì „                |
| attached_files   | jsonb       | ì²¨ë¶€íŒŒì¼ ë©”íƒ€ë°ì´í„°                      |
| view_count       | integer     | ì¡°íšŒìˆ˜ (â‰¥0)                              |
| like_count       | integer     | ì¢‹ì•„ìš” ìˆ˜ (â‰¥0)                           |
| comment_count    | integer     | ëŒ“ê¸€ ìˆ˜ (â‰¥0)                             |
| has_attachments  | boolean     | ì²¨ë¶€íŒŒì¼ ì¡´ì¬ ì—¬ë¶€                       |
| attachment_count | integer     | ì²¨ë¶€íŒŒì¼ ê°œìˆ˜ (â‰¥0)                       |
| is_deleted       | boolean     | ì†Œí”„íŠ¸ ì‚­ì œ í”Œë˜ê·¸                       |
| deleted_at       | timestamptz | ì‚­ì œ ì‹œê°„                                |
| created_at       | timestamptz | ìƒì„± ì‹œê°„                                |
| updated_at       | timestamptz | ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„                         |
| last_comment_at  | timestamptz | ë§ˆì§€ë§‰ ëŒ“ê¸€ ì‹œê°„                         |

#### comments (ëŒ“ê¸€)

ìµëª… ì„¤ê³„ê°€ ì ìš©ëœ ê³„ì¸µí˜• ëŒ“ê¸€ ì‹œìŠ¤í…œ

| ì»¬ëŸ¼ëª…        | íƒ€ì…        | ì„¤ëª…                                 |
| ------------- | ----------- | ------------------------------------ |
| id            | uuid        | ê¸°ë³¸í‚¤ (ìë™ ìƒì„±)                   |
| post_id       | uuid        | posts í…Œì´ë¸” ì™¸ë˜í‚¤                  |
| parent_id     | uuid        | ëŒ€ëŒ“ê¸€ì„ ìœ„í•œ ìê¸°ì°¸ì¡° ì™¸ë˜í‚¤        |
| content       | text        | ëŒ“ê¸€ ë‚´ìš© (1-1000ì)                 |
| password_hash | text        | ëŒ“ê¸€ ì†Œìœ ê¶Œì„ ìœ„í•œ í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸   |
| nickname      | varchar     | ì‚¬ìš©ì ì œê³µ ë‹‰ë„¤ì„ (ìµœëŒ€ 10ì)       |
| depth         | integer     | ì¤‘ì²© ê¹Šì´ (0-10ë ˆë²¨)                 |
| like_count    | integer     | ì¢‹ì•„ìš” ìˆ˜ (â‰¥0)                       |
| reply_count   | integer     | ì§ì ‘ ë‹µê¸€ ìˆ˜ (â‰¥0)                    |
| is_author     | boolean     | ëŒ“ê¸€ ì‘ì„±ìê°€ ê²Œì‹œê¸€ ì‘ì„±ìì¸ì§€ ì—¬ë¶€ |
| is_deleted    | boolean     | ì†Œí”„íŠ¸ ì‚­ì œ í”Œë˜ê·¸                   |
| deleted_at    | timestamptz | ì‚­ì œ ì‹œê°„                            |
| created_at    | timestamptz | ìƒì„± ì‹œê°„                            |
| updated_at    | timestamptz | ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„                     |

#### attachments (ì²¨ë¶€íŒŒì¼)

ì‚¬ìš©ì ì‹ë³„ ì •ë³´ê°€ ì—†ëŠ” íŒŒì¼ ì²¨ë¶€ ë©”íƒ€ë°ì´í„°

| ì»¬ëŸ¼ëª…        | íƒ€ì…        | ì„¤ëª…                   |
| ------------- | ----------- | ---------------------- |
| id            | uuid        | ê¸°ë³¸í‚¤ (ìë™ ìƒì„±)     |
| post_id       | uuid        | posts í…Œì´ë¸” ì™¸ë˜í‚¤    |
| filename      | text        | ì‹œìŠ¤í…œ íŒŒì¼ëª…          |
| original_name | text        | ì‚¬ìš©ì ì œê³µ íŒŒì¼ëª…     |
| file_type     | text        | MIME íƒ€ì…              |
| file_size     | integer     | íŒŒì¼ í¬ê¸° (ë°”ì´íŠ¸, >0) |
| storage_path  | text        | íŒŒì¼ ì €ì¥ ìœ„ì¹˜         |
| is_image      | boolean     | ì´ë¯¸ì§€ íŒŒì¼ ì—¬ë¶€       |
| created_at    | timestamptz | ì—…ë¡œë“œ ì‹œê°„            |

### ë°ì´í„°ë² ì´ìŠ¤ ê´€ê³„ë„

```mermaid
erDiagram
    posts {
        uuid id PK
        text title
        text content
        text password_hash
        varchar nickname
        integer view_count
        integer like_count
        integer comment_count
        boolean is_deleted
        timestamptz created_at
    }

    comments {
        uuid id PK
        uuid post_id FK
        uuid parent_id FK
        text content
        text password_hash
        varchar nickname
        integer depth
        integer like_count
        boolean is_author
        boolean is_deleted
        timestamptz created_at
    }

    attachments {
        uuid id PK
        uuid post_id FK
        text filename
        text original_name
        text file_type
        integer file_size
        timestamptz created_at
    }

    posts ||--o{ comments : "1:ë‹¤ ê´€ê³„"
    posts ||--o{ attachments : "1:ë‹¤ ê´€ê³„"
    comments ||--o{ comments : "ëŒ€ëŒ“ê¸€ ê´€ê³„"
```

## ì„¤ì¹˜ ë°©ë²•

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18+
- npm ë˜ëŠ” yarn
- Supabase ê³„ì •

### ì„¤ì¹˜ ê³¼ì •

1. **ì €ì¥ì†Œ í´ë¡ **

   ```bash
   git clone https://github.com/your-org/hit-secret.git
   cd hit-secret
   ```

2. **ì˜ì¡´ì„± ì„¤ì¹˜**

   ```bash
   npm install
   ```

3. **í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**

   ```bash
   cp .env.example .env
   ```

   `.env` íŒŒì¼ ì„¤ì •:

   ```env
   SUPABASE_URL=your_supabase_url
   SUPABASE_ANON_KEY=your_supabase_anon_key
   SITE_PASSWORD=your_site_password
   ```

4. **ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •**

   Supabase SQL ì—ë””í„°ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:

   ```bash
   # supabase/schema.sqlì˜ ìŠ¤í‚¤ë§ˆë¥¼ ì ìš©
   ```

5. **ê°œë°œ ì„œë²„ ì‹¤í–‰**

   ```bash
   npm run dev
   ```

   `http://localhost:3000`ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì ‘ê·¼ ê°€ëŠ¥

### Supabase í”„ë¡œì íŠ¸ ìƒì„¸ ì…‹ì—…

1. Supabase í”„ë¡œì íŠ¸ ìƒì„± (Region ì„ íƒ í›„ ìƒì„±)
2. Project Settings > API ì—ì„œ `Project URL` / `anon public` í‚¤ ë³µì‚¬
3. SQL Editor ì—ì„œ `supabase/schema.sql` ë‚´ìš© ì „ì²´ ì‹¤í–‰ (í•„ìš” ì‹œ í•œ ë²ˆ ë” ì‹¤í–‰í•´ FK/Index ì ìš© í™•ì¸)
4. (ì´ë¯¸ì§€ ì—…ë¡œë“œ ë“± íŒŒì¼ ì‚¬ìš© ì‹œ) Storage > ìƒˆ Bucket ìƒì„±
   - ì´ë¦„ ì˜ˆ: `public`
   - Public ê¶Œí•œ í—ˆìš© (ë˜ëŠ” RLS ì •ì±… ë³„ë„ ì‘ì„±)
5. (ì„ íƒ) Storage RLS ì •ì±…ì´ ì¼œì ¸ ìˆë‹¤ë©´ ìµœì†Œ ë‹¤ìŒ ì •ì±… ì¶”ê°€:
   - `SELECT/INSERT` ëª¨ë‘ `true;` ë¡œ í—ˆìš© (ìµëª… ê²Œì‹œíŒ íŠ¹ì„±)
6. (ì„ íƒ) ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì‹œ Supabase CLI ì‚¬ìš©í•  ê²½ìš°:
   ```bash
   npm i -g supabase
   supabase start # ë¡œì»¬ ì»¨í…Œì´ë„ˆ ì‹¤í–‰
   ```

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env)

| ë³€ìˆ˜                   | êµ¬ë¶„ | ì„¤ëª…                                              | ì˜ˆì‹œ                     |
| ---------------------- | ---- | ------------------------------------------------- | ------------------------ |
| SUPABASE_URL           | í•„ìˆ˜ | Supabase í”„ë¡œì íŠ¸ URL                             | https://xxxx.supabase.co |
| SUPABASE_ANON_KEY      | í•„ìˆ˜ | Supabase public anon key                          | eyJhbGciOiJI...          |
| SITE_PASSWORD          | í•„ìˆ˜ | ì‚¬ì´íŠ¸ ì§„ì… ë³´í˜¸ ë¹„ë°€ë²ˆí˜¸                         | mysecret                 |
| SERVER_API_KEY         | í•„ìˆ˜ | ì„œë²„ ë‚´ë¶€ API ë³´í˜¸ìš© í‚¤                           | random-long-key          |
| AD_VISIBLE             | ì„ íƒ | ì „ì²´ ê´‘ê³  on/off (true/false)                     | true                     |
| AD_SIDEBAR_ENABLED     | ì„ íƒ | ì‚¬ì´ë“œë°” ê´‘ê³  on/off                              | true                     |
| AD_POST_DETAIL_ENABLED | ì„ íƒ | ê²Œì‹œê¸€ ìƒì„¸ í•˜ë‹¨ ê´‘ê³  on/off                      | true                     |
| COUPANG_SIDEBAR_AD_URL | ì„ íƒ | ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ ì‚¬ì´ë“œë°” ìœ„ì ¯ URL                   | https://coupa.ng/abc123  |
| COUPANG_POST_AD_URL    | ì„ íƒ | ê²Œì‹œê¸€ í•˜ë‹¨ ì¿ íŒ¡ ê´‘ê³  URL                         | https://coupa.ng/def456  |

`.env.example` íŒŒì¼ì„ ë³µì‚¬í•˜ì—¬ `.env` ìƒì„± í›„ ê°’ì„ ì„¤ì •í•˜ì„¸ìš”. ê´‘ê³  ê¸°ëŠ¥ì´ í•„ìš” ì—†ë‹¤ë©´ `AD_VISIBLE=false`ë¡œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

### Docker ë¡œì»¬ ë¹Œë“œ & ì‹¤í–‰

ë©€í‹° ìŠ¤í…Œì´ì§€ Dockerfile ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

í•µì‹¬ ë‚´ìš© (ìš”ì•½):

```Dockerfile
FROM node:22-alpine AS builder
WORKDIR /app
RUN apk add --no-cache libc6-compat python3 make g++
COPY package*.json ./
RUN npm ci || npm install
COPY . .
RUN npm run build

FROM node:22-alpine AS runner
WORKDIR /app
ENV NODE_ENV=production HOST=0.0.0.0 PORT=3000
RUN apk add --no-cache libc6-compat
COPY --from=builder /app/.output ./.output
EXPOSE 3000
CMD ["node", ".output/server/index.mjs"]
```

ë¡œì»¬ ë‹¨ì¼ ì´ë¯¸ì§€ ë¹Œë“œ & ì‹¤í–‰:

```bash
docker build -t hit-secret .
docker run --rm -p 3000:3000 \
    -e SUPABASE_URL=$SUPABASE_URL \
    -e SUPABASE_ANON_KEY=$SUPABASE_ANON_KEY \
    -e SITE_PASSWORD=$SITE_PASSWORD \
    -e SERVER_API_KEY=$SERVER_API_KEY \
    hit-secret
```

### docker-compose í”„ë¡œë•ì…˜ ë°°í¬ ì˜ˆì‹œ

`docker-compose.deploy.yml` ìš”ì•½:

```yaml
version: "3.8"
services:
  hit-secret:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: hit-secret
    volumes:
      - /home/ubuntu/workspace/apps/hit-secret/logs:/app/logs
    ports:
      - "3011:3000"
    environment:
      - NODE_ENV=production
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
      - SITE_PASSWORD=${SITE_PASSWORD}
      - SERVER_API_KEY=${SERVER_API_KEY}
    restart: unless-stopped
    networks:
      - infra-net
networks:
  infra-net:
    external: true
```

ë°°í¬ ì ˆì°¨ ì˜ˆ:

```bash
docker compose -f docker-compose.deploy.yml build --pull
docker compose -f docker-compose.deploy.yml up -d
docker compose -f docker-compose.deploy.yml logs -f
```

ë¡œê·¸ ë””ë ‰í† ë¦¬ ê¶Œí•œ ë¬¸ì œ ë°œìƒ ì‹œ:

```bash
sudo mkdir -p /home/ubuntu/workspace/apps/hit-secret/logs
sudo chown -R $(whoami):$(whoami) /home/ubuntu/workspace/apps/hit-secret/logs
```

ì—…ë°ì´íŠ¸(ë¡¤ë§) ì‹œ:

```bash
git pull
docker compose -f docker-compose.deploy.yml build --no-cache
docker compose -f docker-compose.deploy.yml up -d
```

ìºì‹œ ì´ìŠˆ(íŒŒì¼ ëˆ„ë½ ë“±) ì˜ì‹¬ ì‹œ `--no-cache` ì˜µì…˜ì„ ì‚¬ìš©í•˜ê±°ë‚˜ Dockerfile ìƒë‹¨ì— `ARG BUILD_REVISION=<date>` ë“±ì„ ì¶”ê°€í•´ ìºì‹œ ë¬´íš¨í™” í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### í—¬ìŠ¤ì²´í¬ / ìš´ì˜ íŒ

- (ì„ íƒ) nginx ì•ë‹¨ ë°°ì¹˜ í›„ `/` í”„ë¡ì‹œ, gzip/ìºì‹œ í—¤ë” ì¶”ê°€
- ë¡œê·¸ íšŒì „: í˜¸ìŠ¤íŠ¸ì—ì„œ `logrotate` ëŒ€ìƒì— /home/ubuntu/workspace/apps/hit-secret/logs/\*.log ì¶”ê°€
- ë©”íŠ¸ë¦­ í•„ìš” ì‹œ ë³„ë„ reverse proxy ë ˆë²¨ì—ì„œ ìˆ˜ì§‘ (ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ìµœì†Œí•œì˜ ì •ë³´ë§Œ ìœ ì§€)

### Nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ ì˜ˆì‹œ (ì„œë¸ŒíŒ¨ìŠ¤ /secret/ ë¡œ ì„œë¹„ìŠ¤)

ë‹¤ìŒ ì„¤ì •ì€ `hit-secret` ì»¨í…Œì´ë„ˆ(ë„ì»¤ ë„¤íŠ¸ì›Œí¬ ë‚´ ì´ë¦„) 3000 í¬íŠ¸ë¥¼ `/secret/` ê²½ë¡œë¡œ í”„ë¡ì‹œí•©ë‹ˆë‹¤. ì—…ë¡œë“œ/ìŠ¤íŠ¸ë¦¬ë°ì„ ìœ„í•´ ë²„í¼ë§ì„ ì¤„ì´ê³  WebSocket ì—…ê·¸ë ˆì´ë“œë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.

`/etc/nginx/conf.d/hit-secret.conf` ì˜ˆì‹œ:

```nginx
upstream hit_secret_upstream {
   server hit-secret:3000;
   keepalive 64;
}

map $http_upgrade $connection_upgrade {
   default upgrade;
   ''      close;
}

server {
   listen 80;
   server_name _;

   # gzip (ì„ íƒ)
   gzip on;
   gzip_types text/plain text/css application/json application/javascript application/xml+rss application/xml image/svg+xml;
   gzip_min_length 512;

   # ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¸ŒíŒ¨ìŠ¤ ë§¤í•‘
   location /secret/ {
      proxy_pass http://hit-secret:3000/secret/;
      proxy_http_version 1.1;

      # í•„ìˆ˜ í—¤ë” (IP ìµëª…ì„± ìœ ì§€ ìœ„í•´ ë°±ì—”ë“œì—ì„œ ë¬´ì‹œí•˜ê±°ë‚˜ ì €ì¥ ê¸ˆì§€)
      proxy_set_header Host              $host;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_set_header X-Forwarded-Host  $host;
      # ì•„ë˜ ë‘ ì¤„ì€ í´ë¼ì´ì–¸íŠ¸ IP ë¥¼ ì „ë‹¬í•˜ë¯€ë¡œ ì™„ì „í•œ ìµëª…ì„± ì •ì±…ì´ë¼ë©´ ì œê±° ê°€ëŠ¥
      proxy_set_header X-Real-IP         $remote_addr;          # í•„ìš”ì‹œë§Œ
      proxy_set_header X-Forwarded-For   $proxy_add_x_forwarded_for; # í•„ìš”ì‹œë§Œ

      # WebSocket / HMR / ì—…ê·¸ë ˆì´ë“œ
      proxy_set_header Upgrade           $http_upgrade;
      proxy_set_header Connection        $connection_upgrade;

      # ì—…ë¡œë“œ ì„±ëŠ¥
      client_max_body_size           100m;
      client_body_buffer_size        128k;
      proxy_request_buffering        off;        # chunked ì—…ë¡œë“œ
      proxy_buffering                off;        # ì‹¤ì‹œê°„ ì „ì†¡ (í•„ìš” ì‹œ on)

      proxy_connect_timeout          90;
      proxy_send_timeout             90;
      proxy_read_timeout             90;

      # ìºì‹œ ì œì–´ (SSR ì‘ë‹µì€ ê¸°ë³¸ no-store, ì •ì  ìì‚°ì—ë§Œ ë³„ë„ location ì‚¬ìš© ê¶Œì¥)
      add_header X-Frame-Options DENY;
      add_header X-Content-Type-Options nosniff;
      add_header Referrer-Policy strict-origin-when-cross-origin;
   }

   # ì •ì  ìì‚° ì§ì ‘ ì„œë¹™ ì˜ˆ (Nuxt .output/public ê°€ /_nuxt ë“±ìœ¼ë¡œ ë°˜ì˜ë  ê²½ìš°)
   # location /_nuxt/ { proxy_pass http://hit-secret:3000/_nuxt/; proxy_cache static_cache; }
}
```

ìµëª…ì„± ê°•í™”í•˜ë ¤ë©´ `X-Real-IP`, `X-Forwarded-For` ì „ë‹¬ ë¼ì¸ì„ ì œê±°í•˜ê±°ë‚˜ ë°±ì—”ë“œ ë¡œê±°ì—ì„œ í•´ë‹¹ í•„ë“œ ë¬´ì‹œí•˜ë„ë¡ ìœ ì§€í•˜ì„¸ìš”.

ì„œë¸ŒíŒ¨ìŠ¤(`/secret/`)ê°€ ì•„ë‹Œ ë£¨íŠ¸(`/`) ì œê³µì„ ì›í•œë‹¤ë©´ `location / { proxy_pass http://hit-secret:3000/; }` ë¡œ ë‹¨ìˆœí™”í•˜ë©´ ë©ë‹ˆë‹¤.

### Vercel ë°°í¬

Vercelì„ ì‚¬ìš©í•œ ê°„í¸í•œ ë°°í¬ ë°©ë²•ì…ë‹ˆë‹¤.

**1. ë°°í¬ ì¤€ë¹„**
```bash
# GitHub ì €ì¥ì†Œì— ì½”ë“œ í‘¸ì‹œ
git add .
git commit -m "Deploy to Vercel"
git push origin main
```

**2. Vercel í”„ë¡œì íŠ¸ ìƒì„±**
- [Vercel ëŒ€ì‹œë³´ë“œ](https://vercel.com/dashboard)ì—ì„œ "New Project" í´ë¦­
- GitHub ì €ì¥ì†Œ ì—°ê²° ë° ì„ íƒ
- Framework Preset: **Nuxt.js** ìë™ ê°ì§€ë¨
- Root Directory: ë£¨íŠ¸ ë””ë ‰í† ë¦¬ ê·¸ëŒ€ë¡œ ì‚¬ìš©

**3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •**
Vercel í”„ë¡œì íŠ¸ ì„¤ì • > Environment Variablesì—ì„œ ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ì¶”ê°€:

```bash
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SITE_PASSWORD=your-site-password
SERVER_API_KEY=your-random-api-key
```

**4. ë°°í¬ ì‹¤í–‰**
- "Deploy" ë²„íŠ¼ í´ë¦­í•˜ë©´ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° ë°°í¬ ì§„í–‰
- ì™„ë£Œ í›„ ì œê³µë˜ëŠ” URLë¡œ ì ‘ì† ê°€ëŠ¥

**5. ë„ë©”ì¸ ì„¤ì • (ì„ íƒ)**
- Project Settings > Domainsì—ì„œ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²° ê°€ëŠ¥
- Vercelì€ ìë™ìœ¼ë¡œ HTTPS ì¸ì¦ì„œë¥¼ ì œê³µ

**ì—…ë°ì´íŠ¸ ë°©ë²•:**
```bash
git push origin main  # GitHubì— í‘¸ì‹œí•˜ë©´ ìë™ìœ¼ë¡œ ì¬ë°°í¬ë¨
```

---

## í…ŒìŠ¤íŠ¸

### í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
npm run build
npm run preview
```

### í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
npm run test

# E2E í…ŒìŠ¤íŠ¸
npm run test:e2e

# í…ŒìŠ¤íŠ¸ UI
npm run test:ui
```

## ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼

Supabase ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ê²€í† í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²€ì‚¬ë‚˜ í…ŒìŠ¤íŠ¸ ëª©ì ìœ¼ë¡œ ë¼ì´ë¸Œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼í•˜ê³  ì‹¶ìœ¼ì‹œë©´, ì €ì—ê²Œ ë¬¸ì˜í•´ ì£¼ì„¸ìš”.

## ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” [MIT License](./LICENSE)ë¥¼ ë”°ë¦…ë‹ˆë‹¤.\
ììœ ë¡œìš´ ì‚¬ìš© / ë³µì œ / ìˆ˜ì • / ë°°í¬ê°€ ê°€ëŠ¥í•˜ë©°, ì €ì‘ê¶Œ ë° ë¼ì´ì„ ìŠ¤ ì „ë¬¸ ê³ ì§€ë¥¼ ìœ ì§€í•´ì•¼ í•©ë‹ˆë‹¤.

ë°°í¬ë³¸ í˜¹ì€ íŒŒìƒ ì‘ì—…ë¬¼ì—ëŠ” ì•„ë˜ ê³ ì§€ë¥¼ í¬í•¨í•´ì£¼ì„¸ìš”:

```
Copyright (c) 2025 isnow890

Released under the MIT License. See LICENSE for details.
```

ë°°ì§€: ![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)
